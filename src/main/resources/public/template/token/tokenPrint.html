<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      layout:decorator="~{formDesigner/formCore}">
<head>
    <title th:text="#{token.label.print}"></title>
</head>
<th:block layout:fragment="content">
    <div class="z-print">
        <table class="z-print-main">
            <thead><tr><td>
                <div class="z-print-header-space"> </div>
            </td></tr></thead>
            <tbody><tr><td>
                <div class="z-drawing-board" id="documentDrawingBoard" data-display="print"></div>
            </td></tr></tbody>
            <tfoot><tr><td>
                <div class="z-print-footer-space"> </div>
            </td></tr></tfoot>
        </table>
        <div class="z-print-main-footer">
            <img class="z-img i-logo-print" th:src="@{/assets/media/icons/logo/icon_logo_print.svg}" width="152" height="26">
            <span class="float-right align-right" id="print-information"></span>
        </div>
    </div>
</th:block>
<th:block layout:fragment="pageScript">
    <link th:href="@{/assets/css/document.css}" rel="stylesheet"/>
    <script type="module">
        /*<![CDATA[*/
        import { zFormToken } from '../../assets/js/document/zFormToken.js';

        window.onload = function() {
            const userName = '[[${#authentication.details.userName}]]';
            const userEmail = '[[${#authentication.details.email}]]';
            const time = '[[${time}]]';

            const printInfo = document.getElementById('print-information');
            printInfo.innerHTML = userName + ' [' + userEmail + ']<br>' + i18n.printFormat(time);

            const printData = JSON.parse(sessionStorage.getItem('alice_print'));
            zFormToken.domElement = document.getElementById('documentDrawingBoard');
            zFormToken.makeForm(printData);

            setTimeout(function() {
                window.print();
            }, 500);
        };
        /*]]>*/
    </script>
</th:block>
</html>
