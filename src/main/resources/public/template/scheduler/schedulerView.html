<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/itsm/pageType/commonViewLayout}">
<head>
    <title th:text="${schedule != null} ? #{scheduler.label.edit} : #{scheduler.label.register}"></title>
</head>
<body>
<div layout:fragment="pageTitle">
    <h1 th:text="#{scheduler.label.schedule}"></h1>
    <h6 class="description ml-2 pl-2" th:text="#{scheduler.msg.scheduleDescription}"></h6>
</div>
<div layout:fragment="pageView">
    <div class="flex-column z-view-row">
        <label for="taskName" th:text="#{scheduler.label.name}"></label>
        <input type="text" class="z-input" id="taskName"  th:value="${schedule?.taskName}" disabled/>
    </div>
    <div class="flex-column z-view-row">
        <label for="taskDesc" th:text="#{scheduler.label.description}"></label>
        <textarea id="taskDesc" name="taskDesc" maxlength="250" rows="5"
                  class="z-textarea textarea-scroll-wrapper" th:text="${schedule?.taskDesc}" disabled></textarea>
    </div>
    <div class="flex-column z-view-row">
        <label for="taskStatus" th:text="#{scheduler.label.status}"></label>
        <select id="taskStatus" required="required" disabled>
            <option value="true" th:text="#{scheduler.status.true}" th:selected="true == ${schedule?.useYn}"></option>
            <option value="false" th:text="#{scheduler.status.false}" th:selected="false == ${schedule?.useYn}"></option>
        </select>
    </div>
    <div class="flex-column z-view-row">
        <label for="taskType" th:text="#{scheduler.label.taskType}"></label>
        <select id="taskType" disabled>
            <option th:each="taskType: ${taskTypeList}" th:value="${taskType.codeValue}"
                    th:text="${taskType.codeName}"
                    th:selected="${taskType.codeValue} == ${schedule?.taskType}">
            </option>
        </select>
    </div>
    <div id="details"></div>
    <!-- 타입: class-->
    <div id="type-class-container"
         th:style="${schedule?.taskType == null || schedule?.taskType == 'class' ? '' : 'display: none'}">
        <div class="flex-column z-view-row">
            <label th:text="#{scheduler.label.class}"></label>
            <input type="text" class="z-input" id="executeClass" th:value="${schedule?.executeClass}" disabled/>
        </div>
        <div class="flex-column z-view-row">
            <label th:text="#{scheduler.label.args}"></label>
            <input type="text" class="z-input" id="args" th:value="${schedule?.args}" disabled/>
        </div>
    </div>
    <!-- 타입: query -->
    <div id="type-query-container" th:style="${schedule?.taskType == 'query' ? '' : 'display: none'}">
        <div class="flex-column z-view-row">
            <label for="executeQuery" th:text="#{scheduler.label.query}"></label>
            <textarea id="executeQuery" name="executeQuery" maxlength="500" rows="10" required="required"
                      class="z-textarea textarea-scroll-wrapper" th:text="${schedule?.executeQuery}" disabled></textarea>
        </div>
    </div>
    <div class="flex-column z-view-row">
        <label for="executeCycleType" th:text="#{scheduler.label.executeCycleType}"></label>
        <select id="executeCycleType" required="required" disabled>
            <option th:each="executeCycleType: ${executeCycleTypeList}" th:value="${executeCycleType.codeValue}"
                    th:text="${executeCycleType.codeName}"
                    th:selected="${executeCycleType.codeValue} == ${schedule?.executeCycleType}">
            </option>
        </select>
    </div>
    <!-- executeCycleType: fixed_delay, fixed_rate -->
    <div id="executeCycleType-cron-container" class="flex-column z-view-row" th:style="${schedule?.executeCycleType == 'cron' ? '' : 'display: none'}">
        <label for="cronExpression" th:text="#{scheduler.label.cronExpression}"></label>
        <input type="text" class="z-input" id="cronExpression" required="required" maxlength="100"
               th:value="${schedule?.cronExpression}" disabled/>
    </div>
    <div id="executeCycleType-fixed-container" class="flex-column z-view-row" th:style="${schedule?.executeCycleType != 'cron' ? '' : 'display: none'}">
        <label for="executeCyclePeriod" th:text="#{scheduler.label.executeCyclePeriod}"></label>
        <input type="text" class="z-input" id="executeCyclePeriod" maxlength="6"
               th:value="${schedule?.executeCyclePeriod}" disabled/>
    </div>
    <div class="flex-row justify-content-start z-view-row">
        <div class="z-button-list">
            <a class="z-button secondary" href="/schedulers/search" th:text="#{common.btn.list}"></a>
        </div>
    </div>
</div>
</body>
<script layout:fragment="pageScript" th:inline="javascript" type="text/javascript">
    /*<![CDATA[*/
    window.onload = function() {
        document.getElementById('taskName').focus();
        OverlayScrollbars(document.querySelector('.z-page-content'), {className: 'scrollbar'});
        OverlayScrollbars(document.querySelectorAll('#taskDesc'), {
            className: 'scrollbar',
            textarea: {
                dynHeight: false,
                dynWidth: false,
                inheritedAttrs: "class"
            }
        });
        OverlayScrollbars(document.querySelectorAll('#executeQuery'), {
            className: 'scrollbar',
            textarea: {
                dynHeight: false,
                dynWidth: false,
                inheritedAttrs: "class"
            }
        });
    };
    /*]]>*/
</script>
</html>
