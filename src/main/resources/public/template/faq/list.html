<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet"
	th:href="@{/assets/vendors/bootstrap-4.3.1-dist/css/bootstrap.min.css}" />
<link rel="stylesheet"
	th:href="@{/assets/vendors/bootstrap-datepicker/css/bootstrap-datepicker.css}" />
<script src="../../assets/js/common.js"></script>
<script src="../../assets/vendors/jquery-3.4.0/jquery-3.4.0.min.js"></script>
<script src="../../assets/vendors/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="../../assets/js/withoutJquery.js"></script>
</head>
<body>
	<div class="container">
		<div>
			<table class="table table-hover" style="text-align: center">
				<colgroup>
					<col width="30%">
					<col width="70%">
				</colgroup>
				<thead>
					<tr>
						<th>그룹</th>
						<th>제목</th>
						<th>편집</th>
					</tr>
				</thead>
				<tbody id="faqs">
				</tbody>
			</table>
		</div>
		<div><a href="/faqs/edit">추가</a></div>
	</div>

	<script type="text/javascript">
    $(document).ready(function() {  
    	loadXMLDoc();
    })
    
    function loadXMLDoc() {
    var xmlhttp = createXmlHttpRequestObject();

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == XMLHttpRequest.DONE) {   // XMLHttpRequest.DONE == 4
           if (xmlhttp.status == 200) {
        	   var faqList = JSON.parse(xmlhttp.responseText);
        	   var contentHTML = ""
        	   for(var i=0; i<faqList.length; i++) {        		    	  
        		    	  faqTrNode = document.createElement("tr");

                          faqTdNode = document.createElement("td");
                          faqTdNode.innerHTML = faqList[i].faqGroup;
                          faqTrNode.appendChild(faqTdNode);

        		    	  faqTdNode = document.createElement("td");
        		    	  faqTdNode.innerHTML = "<a href=\"/faqs/detailView?faqId=" + faqList[i].faqId + "\">" + faqList[i].faqTitle + "</a>";
        		    	  faqTrNode.appendChild(faqTdNode);
        		    	  
        		    	  faqTdNode = document.createElement("td");
                          faqTdNode.innerHTML = "<a href=\"/faqs/edit?faqId=" + faqList[i].faqId + "\">편집</a>";
                          faqTrNode.appendChild(faqTdNode);
                          
                          document.getElementById("faqs").appendChild(faqTrNode);
        	   }
               
           }
           else if (xmlhttp.status == 400) {
              alert('There was an error 400');
           }
           else {
               alert('something else other than 200 was returned');
           }
        }
    };
    xmlhttp.open("GET", "/faqs", true);
    xmlhttp.send();
}
    </script>
</body>
</html>