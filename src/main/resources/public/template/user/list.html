<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>

        tbody tr:hover {
            background: deepskyblue;
            opacity: 0.8;
            cursor: pointer;
        }

    </style>
</head>
<body>
<div style="border: 1px solid red">
    <div>- 검색영역 -</div>

</div>
<div style="border: 1px solid red">
    <div>- 버튼 영역, user.create 권한이 있어야 보임 -</div>
    <div sec:authorize="hasAuthority('user.create')">
        <button type="button" id="userReg" th:text="#{user.reg}">사용자 등록</button>
    </div>
</div>
<div style="border: 1px solid red">
    <div>- 사용자 목록 영역- </div>
    <div id="userList"></div>
</div>


<script type="text/javascript" th:inline="javascript">
    $(document).ready(function () {
        /*<![CDATA[*/
        $.ajax({
            type: "get",
            url: '/users',
            success: function (users) {
                $.ajax({
                    type: 'get', url: '/users/list-search', data: {users: JSON.stringify(users)}
                }).done(function (data) {
                    $('#userList').html(data)
                });
            },
            error: function (request, status, error) {
                alert("Call failed. code : " + request.status + ", message : " + request.errorMsg);
            }
        });

        /** 버튼 클릭시 사용자 등록 화면을 연다. */
        $('#userReg').on('click', function () {
            alert('사용자 등록 화면 만들기')
        })

        /*]]>*/
    });
</script>
</body>
</html>