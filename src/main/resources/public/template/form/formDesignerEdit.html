<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="#{form.label.edit}"></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <meta http-equiv="expire" content="-1"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <link th:href="@{/assets/css/form-designer.css}" rel="stylesheet"/>
    <script th:src="@{/assets/js/util/util-alice.js}"></script>
    <script th:src="@{/assets/js/workflow/workflow.util.js}"></script>
    <script th:src="@{/assets/js/form/formEditor.js}"></script>
    <script th:src="@{/assets/js/form/component.js}"></script>
    <style type="text/css">
        /* 임시 CSS  추후 form-designer.css 로 이동 */
        .component {display: flex; align-items: center; width: 100%; max-width: 100%; border: none; padding-right: 60px; padding-bottom: 20px;}
        /* .component.over { border: 3px dashed #ccc; } */
        .component .move-icon {width:60px; height:80px; content:url("https://placehold.it/60X80"); opacity: 0;}
        .group {display: flex; flex-wrap: wrap; width: 100%; align-items: center; /* padding: 20px 60px 20px 5px;pointer-events: none; */}
        .field input[type=text] {width: 100%; height: 25px;}
        .field textarea {width: 100%;}
        #property-panel .title{padding: 30px 0px 0px 0px; font-size: 30px; font-weight: bold; text-align: center;}
        
        .group[contenteditable=true]:empty::before {content: attr(placeholder); display: block;}
        .group[contenteditable=true] {color : #BCC5D3;font-size: 12px; height:80px; line-height: 80px;}
        .group:focus {outline: none;}
        
        .context-menu {
          display: none;
          position: absolute;
          z-index: 10;
          width: 240px;
          max-height: 200px;
          background-color: #fff;
          border: solid 1px #dfdfdf;
          box-shadow: 1px 1px 2px #cfcfcf;
          overflow: auto;
        }
        .context-menu.on {
            display: block;
        }
        .context-menu ul{
            display: none;
        }
        .context-menu ul.active{
            display: block;
        }
        .context-menu li.active {
            background-color: rgba(188, 197, 211, 0.1);
        }
        .context-menu li:hover {
            background-color: rgba(188, 197, 211, 0.1);
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg form-navbar">
        <a class="navbar-brand" href="#">
            <img th:src="@{/assets/media/icons/form/topmenu/logo.png}" width="24" height="24" alt="Alice">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul id="main-menu" class="mr-auto">
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/save.png}"/><a class="nav-link" href="javascript:void(0);" onclick="formEditor.save();">저장</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/redo.png}"/><a class="nav-link" href="#">작업취소</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/undo.png}"/><a class="nav-link" href="#">작업재실행</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/import.png}"/><a class="nav-link" href="#">가져오기</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/export.png}"/><a class="nav-link" href="#">내보내기</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/save.png}"/><a class="nav-link" href="#">미리보기</a></li>
                <li class="nav-item"><img th:src="@{/assets/media/icons/form/topmenu/save.png}"/><a class="nav-link" href="#">저장하고 나가기</a></li>
            </ul>
            <span class="form-name"></span>
        </div>
    </nav>
    <div class="form-container light-thema" id="form-designer">
        <div class="panel">
            <div class="panel-form" id="panel-form"></div>
            <div class="panel-property" id="panel-property"></div>
        </div>
    </div>
    <div id="context-menu" class="context-menu">
        <ul id="context-menu-control" class="active">
            <li><i class="fa fa-edit"></i><a class="context-item-link" href="#" data-action="copy">복사</a></li>
            <li><i class="fa fa-times"></i><a class="context-item-link" href="#" data-action="delete">삭제</a></li>
        </ul>
        <ul id="context-menu-componet">
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="text">Text</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="textarea">Text Box</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="list">Dropdown</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="radio">Radio Button</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="checkbox">Checkbox</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="label">Label</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="image">Image</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="line">Line</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="date">Date</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="time">Time</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="datetime">Date Time</a></li>
            <li><i class="fa fa-envira"></i><a class="context-item-link" href="#" data-action="fileupload">Fileupload</a></li>   
        </ul>
    </div>
</body>
<script type="text/javascript">
    window.addEventListener('load', function() {
        formEditor.init({formId: '[[${form.formId}]]'});
    });
</script>
</html>