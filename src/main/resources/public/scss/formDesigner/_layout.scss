@import '../template/_layout.scss';

/* 폼 디자이너 팝업 layout
 * form-container - form-header : 상단
 *                - form-component-palette : 컴포넌트 팔레트
 *                - form-main : 폼 메인
 *                             - drawing-board : 실제 컴포넌트들이 그려지는 영역
 *                - form-properties-panel-header: 세부 속성 제목
 *                - form-properties-panel : 세부속성
 */
// 폼 양식
.#{$common-prefix}form {
  &-container {
    @include container;
  }
  &-header {
    @include fixedHeader;
    font-size: $layout-header-font-size;
    font-weight: $layout-header-font-weight;
    color: $layout-header-font-color;
    background-color: $layout-header-bg-color;
    z-index: $z-index-gnb;
    .logo {
      width: 12.5rem; // 200px
      padding: 0 $layout-header-padding; // 0 12px
    }
    .name {
      font-size: $layout-header-font-size;
    }
    .buttons {
      width: 20rem; // 320px
      padding: 0 $layout-header-padding; // 0 12px
      .dropdown {
        &-content {
          visibility: hidden;
          background-color: $layout-header-dropdown-bg-color;
          color: map-get($blues, "hover");
          text-align: center;
          font-size: 1.125rem; // 18px
          margin: 0.6875rem 0 0 0; // 11px
          position: absolute;
          z-index: 500;
          box-shadow: $layout-header-box-shadow;
        }
        &-item {
          padding: 0.6875rem 0.875rem; // 11px 14px
          &:hover { background-color: $layout-header-dropdown-hover-bg-color; }
        }
      }
      .btn-dropdown:hover {
        > .dropdown-content {
          visibility: visible;
          display: block;
        }
        &:last-child > .dropdown-content {
          right: $layout-header-padding; // 12px
        }
      }
    }
  }
  &-component-palette {
    @include fixed($layout-header-height, null, 0, 0);
    width: $layout-component-palette-width;
    background-color: $layout-component-palette-bg-color;
    @include border($layout-component-palette-border-width, solid, $layout-component-palette-border-color, right); // 1px
    @include boxShadow(0, 0, 0.125rem, 0, $layout-component-palette-box-shadow-color); // 2px
    overflow: hidden;

  }
  &-main {
    @include fixedContainer;
    left: $layout-component-palette-width;
    right: $layout-properties-panel-width;
    background-color: $layout-main-bg-color;
    @include scrollbarHidden;
  }
  &-properties-panel-header {
    @include fixed($top: $layout-header-height, $right: 0);
    width: $layout-properties-panel-width;
    height: $layout-properties-panel-header-height;
    font-size: $layout-properties-panel-header-font-size;
    font-weight: $layout-properties-panel-header-font-weight;
    color: $layout-properties-panel-header-font-color;
    background-color: $layout-properties-panel-header-bg-color;
    padding: 0.625rem 0.75rem; // 10px 12px;
  }
  &-properties-panel {
    @include fixed(calc(#{$layout-header-height} + #{$layout-properties-panel-header-height}), 0, 0, null);
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-content: flex-start;
    justify-content: space-between;
    width: $layout-properties-panel-width;
    background-color: $layout-properties-panel-bg-color;
    box-shadow: $layout-properties-panel-box-shadow;
    overflow-x: hidden;
    overflow-y: auto;
    @include scrollbarHidden;
    &:not(:empty){
      @include border(0.0625rem, solid, $layout-properties-panel-header-border-color, top);
    }
    & > .property {
      padding: 0 0.75rem;
    }
  }
}
// 아코디언
.#{$common-prefix}component-accordion-box {
  .#{$common-prefix}component-accordion {
    width: 100%;
    input[type=radio] {
      @include absolute();
      opacity: 0;
      z-index: $z-index-hidden;
    }
    .#{$common-prefix}accordion-label {
      height: $layout-component-palette-accordion-height;
      font-family: $layout-component-palette-accordion-font-family;
      font-size: $layout-component-palette-accordion-font-size;
      font-weight: $layout-component-palette-accordion-font-weight;
      color: $layout-component-palette-accordion-font-color;
      @include border($layout-component-palette-border-width, solid, $layout-component-palette-border-color, bottom); // 1px
      padding: 0 12px; // 0 12px
      cursor:pointer;

      .#{$common-prefix}icon {
        &.i-arrow-right {
          @include rotate(180);
          @include transformOrigin(50% 50%);
          background: $layout-component-palette-accordion-icon-color;
        }
      }
    }
    .#{$common-prefix}accordion-content {
      height: 0;
      @include border(0.0625rem, solid, transparent, bottom); // 1px
      overflow: hidden;
      @include transition(all 0.25s ease-out);

      .#{$common-prefix}component-icon-box {
        position: relative;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        width:100%;
        padding: 0;
        margin: 0;

        .#{$common-prefix}component-icon {
          width: $component-icon-width; // 124px
          height: $component-icon-height;
          text-align: center;
          padding: 0.625rem 0; // 10px 0
          background-color: $component-icon-bg-color;
          @include border($layout-component-palette-border-width, solid, $layout-component-palette-border-color, all); // 1px
          border-top-color: transparent;
          box-shadow: none;
          cursor: move;
          outline: none;
          // 홀수
          &:nth-child(odd) {
            @include absolute($top: calc(var(--data-row, 0) * #{$component-icon-height}), $left: 0.0625rem); // 1px
            border-left-color: transparent;
          }
          // 짝수
          &:nth-child(even) {
            @include absolute($top: calc(var(--data-row, 0) * #{$component-icon-height}), $right: 0);
            border-left-color: transparent;
            border-right-color: transparent;
          }
          .#{$common-prefix}icon {
            background: $component-icon-color;

            &.i-inputBox { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_inputbox.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-textArea { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_textarea.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-textEditor { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_text_editor.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dropdown { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_dropdown.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-radio { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_radio.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-checkBox { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_checkbox.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-date { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_date.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-time { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_time.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dateTime { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_datetime.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-fileUpload { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_fileupload.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-customCode { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_custom_code.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dynamicRowTable { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_dynamic_row_table.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-ci { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_ci.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-label { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_label.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-image { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_image.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-divider { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_divider.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
          }

          .#{$common-prefix}component-name {
            display: block;
            font-family: $component-icon-font-family;
            font-size: $component-icon-font-size;
            font-weight: $component-icon-font-weight;
            color: $component-icon-font-color;
            padding-top: 0.375rem; // 6px
          }

          &:hover {
            background-color: $component-icon-hover-bg-color;
            .#{$common-prefix}icon {
              background: $component-icon-hover-color;
            }
          }

          &:focus {
            border-color: $component-icon-focus-border-color;
            z-index: $z-index-event;
            @include boxShadow(0, 0, 0.125rem, 0, $component-icon-focus-box-shadow-color);
          }
          // 마우스 클릭시
          &.#{$common-prefix}component-icon-drag-active {
            border-color: $component-icon-active-border-color;
            background-color: $component-icon-active-bg-color;
            z-index: $z-index-event;
            box-shadow: none;
            .#{$common-prefix}icon {
              background: $component-icon-active-color;
            }
            .#{$common-prefix}component-name {
              font-weight: $font-weight-bold;
              color: $component-icon-active-color;
            }
          }
          // 마우스 클릭시 drag 되는 item (마우스에 따라다니는 item)
          &.#{$common-prefix}component-icon-drag-on {
            border-color: $component-icon-drag-out-border-color;
            background-color: $component-icon-drag-out-bg-color;
            @include boxShadow(0, 0, 0.125rem, 0, $component-icon-drag-out-box-shadow-color); // 2px
            .#{$common-prefix}icon {
              background: $component-icon-drag-out-color;
            }
            .#{$common-prefix}component-name {
              font-weight: $font-weight-bold;
              color: $component-icon-drag-out-font-color;
            }
          }
          // 마우스가 drag 되는 item 영역을 벗어날 경우 컴포넌트 팔레트 item
          &.#{$common-prefix}component-icon-drag-placeholder {
            border-color: $layout-component-palette-border-color;
            background-color: $component-icon-placeholder-bg-color;
            .#{$common-prefix}icon {
              background: $component-icon-placeholder-color;
            }
            .#{$common-prefix}component-name {
              font-weight: $component-icon-font-weight;
              color: $component-icon-placeholder-color;
            }
          }
        }
      }
    }
    input[type=radio]:checked {
      + .#{$common-prefix}accordion-label {
        .#{$common-prefix}icon {
          &.i-arrow-right {
            @include rotate(90);
          }
        }
      }
      ~ .#{$common-prefix}accordion-content {
        height: calc(100vh - (#{$layout-component-palette-accordion-height} * 4) - #{$layout-header-height});
        border-bottom-color: $layout-component-palette-border-color;
        overflow-y: auto;
        @include scrollbarHidden;
      }
    }
  }
}

// drawing board
.#{$common-prefix}drawing-board {
  .#{$common-prefix}drag-ghost {
    opacity: 0.5;
  }
  .#{$common-prefix}component-drag-in {
    background-color: $component-icon-drag-bg-color;
    @include border(0.0625rem, dashed, $component-icon-drag-border-color, all); // 1px
  }
  // drag & drop (폼 내부에 나타나는 item)
  .#{$common-prefix}component-icon-drag-in {
    display: inline-block;
    width: 100%;
    height: 7.875rem; // 126px
    background-color: $component-icon-drag-bg-color;
    @include border(0.0625rem, dashed, $component-icon-drag-border-color, all); // 1px

    .#{$common-prefix}icon { opacity: 0; }
    .#{$common-prefix}component-name { opacity: 0; }
  }

  // 문서 상태에 따라 편집을 막음
  &.edit {
    .#{$common-prefix}group-label { pointer-events: none; }
  }
}

// 저장 정보
.#{$common-prefix}save-info {
  height: 2.188rem; //35px
  font-family: $layout-main-save-info-font-family;
  font-size: $layout-main-save-info-font-size;
  font-weight: $layout-main-save-info-font-weight;
  color: $layout-main-save-info-font-color;
  margin-top: 1.5625rem; // 25px
}
