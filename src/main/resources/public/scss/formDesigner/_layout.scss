@import '../template/_layout.scss';

/* 폼 디자이너 팝업 layout
 * form-container - form-header : 상단
 *                - form-component-palette : 컴포넌트 팔레트
 *                - form-main : 폼 메인
 *                             - drawing-board : 실제 컴포넌트들이 그려지는 영역
 *                - form-properties-panel-header: 세부 속성 제목
 *                - form-properties-panel : 세부속성
 */
// 폼 양식
.#{$common-prefix}form {
  &-container {
    @include container;
  }
  &-header {
    @include fixedHeader;
    height: $layout-header-height;
    font-family: $layout-header-font-family;
    font-size: $layout-header-font-size;
    font-weight: $layout-header-font-weight;
    color: $layout-header-font-color;
    background-color: $layout-header-bg-color;
    z-index: $z-index-gnb;
    .#{$common-prefix}logo {
      width: 12.5rem; // 200px
      padding: 0 $layout-header-padding; // 0 12px
    }
    .#{$common-prefix}form-name {
      font-size: $layout-header-font-size;
    }
    .#{$common-prefix}form-button-list {
      width: 19.06rem; // 305px

      .#{$common-prefix}header-dropdown {
        @include relative();
      }
    }
  }
  &-component-palette {
    @include fixed($layout-header-height, null, 0, 0);
    width: $layout-component-palette-width;
    background-color: $layout-component-palette-bg-color;
    @include border($layout-component-palette-border-width, solid, $layout-component-palette-border-color, right); // 1px
    @include boxShadow(0, 0, 0.125rem, 0, $layout-component-palette-box-shadow-color); // 2px
    overflow: hidden;

  }
  &-main {
    @include fixedContainer;
    left: $layout-component-palette-width;
    right: $layout-properties-panel-width;
    background-color: $layout-main-bg-color;
    @include scrollbarHidden;
  }
  &-properties-panel-header {
    @include fixed($top: $layout-header-height, $right: 0);
    width: $layout-properties-panel-width;
    height: $layout-properties-panel-header-height;
    font-size: $layout-properties-panel-header-font-size;
    font-weight: $layout-properties-panel-header-font-weight;
    color: $layout-properties-panel-header-font-color;
    background-color: $layout-properties-panel-header-bg-color;
    padding: 0.625rem 0.75rem; // 10px 12px;
  }
  &-properties-panel {
    @include fixed(calc(#{$layout-header-height} + #{$layout-properties-panel-header-height}), 0, 0, null);
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    align-content: flex-start;
    justify-content: space-between;
    width: $layout-properties-panel-width;
    background-color: $layout-properties-panel-bg-color;
    box-shadow: $layout-properties-panel-box-shadow;
    overflow-x: hidden;
    overflow-y: auto;
    @include scrollbarHidden;
    &:not(:empty){
      @include border(0.0625rem, solid, $layout-properties-panel-header-border-color, top);
    }
    & > .property {
      padding: 0 0.75rem;
    }
  }
}
// 아코디언
.#{$common-prefix}component-accordion-box {
  .#{$common-prefix}component-accordion {
    width: 100%;
    input[type=radio] {
      @include absolute();
      opacity: 0;
      z-index: $z-index-hidden;
    }
    .#{$common-prefix}accordion-label {
      height: $layout-component-palette-accordion-height;
      font-family: $layout-component-palette-accordion-font-family;
      font-size: $layout-component-palette-accordion-font-size;
      font-weight: $layout-component-palette-accordion-font-weight;
      color: $layout-component-palette-accordion-font-color;
      @include border($layout-component-palette-border-width, solid, $layout-component-palette-border-color, bottom); // 1px
      padding: 0 12px; // 0 12px
      cursor:pointer;

      .#{$common-prefix}icon {
        &.i-arrow-right {
          @include rotate(180);
          @include transformOrigin(50% 50%);
          background: $layout-component-palette-accordion-icon-color;
        }
      }
    }
    .#{$common-prefix}accordion-content {
      height: 0;
      @include border(0.0625rem, solid, transparent, bottom); // 1px
      overflow: hidden;
      @include transition(all 0.25s ease-out);

      .#{$common-prefix}component-icon-box {
        @include relative();
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        width:100%;
        padding: 0;
        margin: 0;

        .#{$common-prefix}component-icon {
          width: $component-icon-width; // 124px
          height: $component-icon-height;
          text-align: center;
          padding: 0.625rem 0; // 10px 0
          background-color: map-get($component-icon, 'default', 'background');
          @include border($layout-component-palette-border-width, solid, map-get($component-icon, 'default', 'border'), all); // 1px
          border-top-color: transparent;
          @if map-get($component-icon, 'default', 'shadow') != null {
            box-shadow: map-get($component-icon, 'default', 'shadow');
          }
          cursor: move;
          outline: none;
          // 홀수
          &:nth-child(odd) {
            @include absolute($top: calc(var(--data-row, 0) * #{$component-icon-height}), $left: 0.0625rem); // 1px
            border-left-color: transparent;
          }
          // 짝수
          &:nth-child(even) {
            @include absolute($top: calc(var(--data-row, 0) * #{$component-icon-height}), $right: 0);
            border-left-color: transparent;
            border-right-color: transparent;
          }

          .#{$common-prefix}icon {
            background: map-get($component-icon, 'default', 'icon');

            &.i-inputBox { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_inputbox.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-textArea { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_textarea.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-textEditor { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_text_editor.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dropdown { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_dropdown.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-radio { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_radio.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-checkBox { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_checkbox.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-date { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_date.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-time { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_time.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dateTime { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_datetime.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-fileUpload { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_fileupload.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-customCode { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_custom_code.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-dynamicRowTable { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_dynamic_row_table.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-ci { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_ci.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-label { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_label.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-image { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_image.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
            &.i-divider { @include maskImage('#{$icon-folder-path}formDesigner/palette/icon_divider.svg ', 2rem, 2rem, no-repeat, center); } // 32px 32px
          }

          .#{$common-prefix}component-name {
            display: block;
            font-family: $component-icon-font-family;
            font-size: $component-icon-font-size;
            font-weight: $component-icon-font-weight;
            color: map-get($component-icon, 'default', 'font');
            padding-top: 0.375rem; // 6px
          }

          &:hover {
            background-color: map-get($component-icon, 'hover', 'background');
            @if map-get($component-icon, 'hover', 'shadow') != null {
              box-shadow: map-get($component-icon, 'hover', 'shadow');
            }
            .#{$common-prefix}icon {
              background: map-get($component-icon, 'hover', 'icon');
            }
            .#{$common-prefix}component-name {
              color: map-get($component-icon, 'hover', 'font');
            }
          }

          &:focus {
            background-color: map-get($component-icon, 'focus', 'background');;
            border-color: map-get($component-icon, 'focus', 'border');
            z-index: $z-index-event;
            @if map-get($component-icon, 'focus', 'shadow') != null {
              box-shadow: map-get($component-icon, 'focus', 'shadow');
            }
            .#{$common-prefix}icon {
              background: map-get($component-icon, 'focus', 'icon');
            }
            .#{$common-prefix}component-name {
              color: map-get($component-icon, 'focus', 'font');
            }
          }

          // 사용되지 않음 : html5 drag 는 드래그 시작시 active 상태의 디자인을 복사하기 때문에 drag 디자인을 입힘
          &.active {
            border-color: map-get($component-icon, 'active', 'border');
            background-color: map-get($component-icon, 'active', 'background');
            z-index: $z-index-event;
            @if map-get($component-icon, 'active', 'shadow') != null {
              box-shadow: map-get($component-icon, 'active', 'shadow');
            }
            .#{$common-prefix}icon {
              background: map-get($component-icon, 'active', 'icon');
            }
            .#{$common-prefix}component-name {
              font-weight: $font-weight-bold;
              color: map-get($component-icon, 'active', 'font');
            }
          }
          // html5 drag 는 드래그 시작시 active 상태의 디자인을 복사하기 때문에 drag 디자인을 입힘
          // 마우스 클릭시 drag 되는 item (마우스에 따라다니는 item)
          &.drag {
            border-color: map-get($component-icon, 'drag', 'border');
            background-color: map-get($component-icon, 'drag', 'background');
            @if map-get($component-icon, 'drag', 'shadow') != null {
              box-shadow: map-get($component-icon, 'drag', 'shadow');
            }
            .#{$common-prefix}icon {
              background: map-get($component-icon, 'drag', 'icon');
            }
            .#{$common-prefix}component-name {
              font-weight: $font-weight-bold;
              color: map-get($component-icon, 'drag', 'font');
            }
          }
          // 마우스가 drag 되는 item 영역을 벗어날 경우 컴포넌트 팔레트 item
          &.placeholder {
            border-color: map-get($component-icon, 'placeholder', 'border');
            background-color: map-get($component-icon, 'placeholder', 'background');
            @if map-get($component-icon, 'placeholder', 'shadow') != null {
              box-shadow: map-get($component-icon, 'placeholder', 'shadow');
            }
            .#{$common-prefix}icon {
              background: map-get($component-icon, 'placeholder', 'icon');
            }
            .#{$common-prefix}component-name {
              font-weight: $component-icon-font-weight;
              color: map-get($component-icon, 'placeholder', 'font');
            }
          }
        }
      }
    }
    input[type=radio]:checked {
      + .#{$common-prefix}accordion-label {
        .#{$common-prefix}icon {
          &.i-arrow-right {
            @include rotate(90);
          }
        }
      }
      ~ .#{$common-prefix}accordion-content {
        height: calc(100vh - (#{$layout-component-palette-accordion-height} * 4) - #{$layout-header-height});
        border-bottom-color: $layout-component-palette-border-color;
        overflow-y: auto;
        @include scrollbarHidden;
      }
    }
  }
}

// drawing board
.#{$common-prefix}drawing-board {
  .#{$common-prefix}drag-ghost {
    opacity: 0.5;
  }
  .#{$common-prefix}component-drag-in {
    background-color: $component-icon-drag-bg-color;
    @include border(0.0625rem, dashed, $component-icon-drag-border-color, all); // 1px
  }
  // drag & drop (폼 내부에 나타나는 item)
  .#{$common-prefix}component-icon-drag-in {
    display: inline-block;
    width: 100%;
    height: 7.875rem; // 126px
    background-color: $component-icon-drag-bg-color;
    @include border(0.0625rem, dashed, $component-icon-drag-border-color, all); // 1px

    .#{$common-prefix}icon { opacity: 0; }
    .#{$common-prefix}component-name { opacity: 0; }
  }

  // 문서 상태에 따라 편집을 막음
  &.edit {
    .#{$common-prefix}group-label { pointer-events: none; }
  }
}

// 저장 정보
.#{$common-prefix}save-info {
  height: 2.188rem; //35px
  font-family: $layout-main-save-info-font-family;
  font-size: $layout-main-save-info-font-size;
  font-weight: $layout-main-save-info-font-weight;
  color: $layout-main-save-info-font-color;
  margin-top: 1.5625rem; // 25px
}
