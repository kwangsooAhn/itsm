var gModal=function(){var t={title:"",body:"This is the default body. It can include <strong>html</strong>. You can also leave it empty so we will hide it :).",buttons:[],close:{closable:!0,location:"in",bindKey:27,callback:function(t){t.hide()}},onShow:function(t){},onHide:function(t){t.destroy()},onCreate:function(t){},onDestroy:function(t){}};function i(t){return t.className.split(" ").filter(function(t){return t.length>0})}function o(t,o){return i(t).indexOf(o)>=0}function e(t,i){o(t,i)||(t.className+=" "+i)}function n(t,e){if(o(t,e)){var n=i(t);n.splice(n.indexOf(e),1),t.className=n.join(" ")}}"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t});var s=function(i,o){return this.id=o||Math.random().toString(36).substr(2),this.options=Object.assign({},t,i),void 0!==i&&void 0!==i.close&&(this.options.close=Object.assign({},t.close,i.close)),this.display=!1,this.bindings={},this.bind=function(t,i){void 0!==this.bindings[t]&&console.warn("gModal: Tried to bind the key "+t+" twice. Overriding..."),this.bindings[t]=i},this.addKeyListener=function(){window.currentModal=this,window.addEventListener("keydown",this.onKeyPress,!1)},this.removeKeyListener=function(){window.currentModal=void 0,window.removeEventListener("keydown",this.onKeyPress,!1)},this.onKeyPress=function(t){if(void 0!==window.currentModal&&window.currentModal instanceof s){var i=window.currentModal;if(!i.display)return;for(var o=t.keyCode||t.which,e=Object.keys(i.bindings),n=0;n<e.length;n++)if(e[n]===o)return t.preventDefault(),t.stopPropagation(),i.bindings[e[n]](i),!1}},this.show=function(){void 0!==this.wrapper&&(e(this.wrapper,"gmodal-active"),e(document.body,"gmodal-active"),this.display=!0,this.options.onShow(this))},this.hide=function(){void 0!==this.wrapper&&(n(this.wrapper,"gmodal-active"),n(document.body,"gmodal-active"),this.display=!1,this.options.onHide(this))},this.create=function(){if(void 0===this.wrapper){var t,i;if(this.wrapper=document.createElement("div"),this.wrapper.className="gmodal-wrapper",this.wrapper.id="gmodal-wrapper-"+this.id,(t=document.createElement("div")).className="gmodal-backdrop",(i=document.createElement("div")).className="gmodal-dialog",void 0!==this.options.close.closable&&this.options.close.closable){var o=document.createElement("a");o.setAttribute("href","javascript:void(0);"),void 0===this.options.close.callback&&(this.options.close.callback=function(){}),o.modal=this,o.callback=this.options.close.callback,o.onclick=function(t){return t.preventDefault(),t.stopPropagation(),this.callback(this.modal),!1},"number"==typeof this.options.close.bindKey&&this.bind(this.options.close.bindKey,this.options.close.callback),void 0===this.options.close.location||"in"==this.options.close.location?(o.className="gmodal-close-in",i.appendChild(o)):(o.className="gmodal-close-out",t.appendChild(o))}if(""!=this.options.title){var e=document.createElement("div");e.className="gmodal-title",e.innerHTML=this.options.title,i.appendChild(e)}if(""!=this.options.message){var n=document.createElement("div");n.className="gmodal-message",n.innerHTML=this.options.message;var s=document.createElement("div");s.className="gmodal-body",void 0!==this.options.type&&(s.className+=" "+this.options.type),s.appendChild(n),i.appendChild(s)}if(this.options.buttons.length>0){var a=document.createElement("div");a.className="gmodal-buttons";for(var l=0;l<this.options.buttons.length;l++){var c=document.createElement("button");c.setAttribute("type","button"),c.className="gmodal-button",void 0!==this.options.buttons[l].classes&&(c.className+=" "+this.options.buttons[l].classes),void 0!==this.options.buttons[l].content&&(c.innerHTML=this.options.buttons[l].content),void 0===this.options.buttons[l].callback&&(this.options.buttons[l].callback=function(t){t.hide()}),c.modal=this,c.callback=this.options.buttons[l].callback,c.onclick=function(t){return t.preventDefault(),t.stopPropagation(),this.callback(this.modal),!1},"number"==typeof this.options.buttons[l].bindKey&&this.bind(this.options.buttons[l].bindKey,this.options.buttons[l].callback),a.appendChild(c)}i.appendChild(a)}this.wrapper.appendChild(t),this.wrapper.appendChild(i),document.body.appendChild(this.wrapper),this.addKeyListener(),this.options.onCreate(this)}},this.destroy=function(){void 0!==this.wrapper&&(document.body.removeChild(this.wrapper),this.wrapper=void 0,this.removeKeyListener(),this.options.onDestroy(this))},this.create(),this};return s}();