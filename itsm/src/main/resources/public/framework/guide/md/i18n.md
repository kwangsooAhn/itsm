# 국제화 (다국어 처리 중심)
---
## 1. 개요
### 국제화(I18n)란?
**Internationalization**. i 와 n 사이에 18 글자의 단어가 있어서 **I18n** 이라고도 표현한다.  
제품이나 서비스를 특정지역의 언어나 문화에 맞추는, 즉 현지화라고 불리는 과정을 쉽게 할 수 있도록 계획하거나 이행하는 과정을 말한다.  

*※ 국제화라는 주제는 너무 폭넓기 때문에, 본 문서에서는 ***Spring boot***을 기준으로 한 다국어 처리를 중심으로 작성한다.*  

## 2. 설정 방법  
### Message Source  
Spring Boot의 특성 상 MessageSource 설정이 이미 되어있으며, default로 resources 폴더 아래에 messages.properties 파일이 MessageSource의 리소스 파일로 사용된다.  
이 파일에 다국어 대상의 메시지들을 등록하여 사용하며, messages.properties의 경우 messages.yml로 변환하여 사용할 수 있다.  
> **<message.properties>**  
> ```properties
>   ...
>   # key=value 형식으로 작성
>   login.welcome-msg=Welcome!
>   ...
> ```  

> **<message.yml>**  
> ```yml
>   ...
>   # *.properties와 동일하게 key=value 형식으로 작성
>   login.welcome-msg=Welcome!
>   
>   # *.yml의 경우 아래와 같이 계층적 구조로도 작성이 가능
>   lang:
>     change: "Change the language"
>     en: "English"
>     ko: "Korean"
>     select: "-select-"
>   ...
> ```  

#### Message Source 세부설정  
messages.properties 또는 messages.yml를 하나만 작성한 경우 모든 locale에 대해서 해당 파일이 사용된다.  
즉, messages.properties 또는 messages.yml 파일은 locale을 판단할 수 없을 때 default로 사용되는 파일이고,  
원하는 locale에 대해서 messages_XX.properties(또는 yml) 형태로 파일을 추가함으로써 해당 언어를 지원할 수 있다.  
* 예를 들어 한국어를 지원하려면 messages_ko.properties(또는 yml) 형태로 파일을 생성하면 된다.  
* messages 파일을 포함한 resource 경로에 .이 들어가면 path 구분자로 인식하므로, 정상적인 경로로 로딩되지 않으니 주의한다. 
 ☞[Spring Boot(Spring) i18n 설정 시 주의사항](https://blog.hkwon.me/spring-boot-spring-i18n-configuration/)  

Message Source는  별도로 저장된 경로를 지정할 수 있으며, application.properties에 아래와 같이 작성한다.
> **<application.properties>**  
> ```
> # 2019-10-11 기준
> spring.messages.basename=public/template/message/messages
> ```
또는 I18nnConfig.kt에 아래와 같이 지정하는 방법도 있다.  
> **<I18nnConfig.kt>**  
> ```kotlin
> ...
> public open fun messageSource() : MessageSource {
>     var ms: YamlMessageSource = YamlMessageSource()
>     ms.setBasename("public/template/message/yml/messages")
>     ms.setDefaultEncoding("UTF-8")
>     ms.setAlwaysUseMessageFormat(true)
>     ms.setUseCodeAsDefaultMessage(true)
>     ms.setFallbackToSystemLocale(true)
>     return ms;
> }
> ...
> class YamlMessageSource : ResourceBundleMessageSource() {
>     @Throws(MissingResourceException::class)
>     protected override fun doGetBundle(basename: String, locale: Locale) : ResourceBundle {
>         return ResourceBundle.getBundle(basename, locale, YamlResourceBundle.Control.INSTANCE)
>     }
> }
> ...

### 샘플 페이지에 적용하기
> **<sample.html>** 
> ```html
> <!DOCTYPE HTML>
> <html xmlns:th="http://www.thymeleaf.org">
> <head>
> <meta charset="UTF-8">
> <body>
>   ...
>   <div>
>     <!-- th:text=#{key} 형식으로 작성 -->
>     <span th:text="#{login.welcome-msg}">Some Text</span>
>   </div>
>   ...
> </body>
> </html>
> ```


### ☞ [[적용예제]](http://localhost:8080/template/i18nTest)  

---

## 작성 중 ##